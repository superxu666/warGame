var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);n.prototype=t.prototype,e.prototype=new n},__assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,a=arguments.length;a>n;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},main;!function(e){var t=function(){function e(){}return e.getInstance=function(){return e._instance||(e._instance=new e)},e.prototype.transpond=function(){var e=this;e.curActiveTarget&&BaseWar.getInstance().trigger(e.curActiveTarget)},e}();e.EventTranspond=t,__reflect(t.prototype,"main.EventTranspond")}(main||(main={}));var main;!function(e){var t=function(){function e(){}return e.sound="main/sound/",e.atlas="main/img/ui.png",e.skeleton="main/skeleton/",e.img="main/img/",e.d1sheetAlias="main/img/d1sheet.png",e.d2sheetAlias="main/img/d2sheet.png",e}();e.Conf=t,__reflect(t.prototype,"main.Conf")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var e=t.call(this)||this;e.type=1;var n=e;n.eventSets={},n.userData={},n.width=635,n.height=350,n.horizonalCenter=0,n.verticalCenter=0;var a=SkinManager.createScaleImage(n,0,0,"rms_view_bg_png",URLConf.mainImg+"d1sheet.png",new GYLite.Scale9GridRect(60,60,60,60));return a.width=n.width,a.height=n.height,n.close=SkinManager.createBtn2(n,0,0,["rms_view_close_btn_png"],URLConf.mainImg+"d1sheet.png",null,null,ScaleButtonSkin2),n.close.eventname="close",n.close.top=-20,n.close.right=-20,n.input=new GYLite.GYTextInput(new GYLite.TextInputSkin(Main.instance.getRes("rms_input_bg_png",URLConf.mainImg+"d2sheet.png"),new GYLite.Scale9GridRect(54,2))),n.input.width=400,n.input.height=62,n.input.x=50,n.input.y=180,n.input.textInput.color=16777215,n.input.textInput.size=30,n.input.textInput.width=n.input.width-45,n.input.textInput.height=n.input.height,n.input.textInput.paddingTop=45,n.input.textInput.paddingLeft=40,n.addElement(n.input),n.gText=SkinManager.createText(n,70,90,"赠送金币",16777215,30,"center",130,56),n.gText.eventname="gtext",n.gText.touchEnabled=!0,n.yText=SkinManager.createText(n,n.gText.x+n.gText.width+50,90,"赠送银币",10066329,30,"center",130,56),n.yText.eventname="ytext",n.yText.touchEnabled=!0,n.sendBtn=SkinManager.createBtn2(n,n.input.x+n.input.width,n.input.y+2,["rms_btn_bg_1_png"],URLConf.mainImg+"d2sheet.png"),n.sendBtn.eventname="send",n.sendBtn.label="赠送",n.sendBtn.labelDisplay.color=16777215,n.sendBtn.labelDisplay.size=30,n.bindEvent(),e}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.updateState=function(){var e=this;e.input.text=""},n.prototype.bindEvent=function(){var t=this;t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.handleClick,t),t.input.addEventListener(egret.Event.CHANGE,t.handleInputChange,t),t.eventSets={close:function(){e.UtilTool.clickSound(),t.hide()},gtext:function(){e.UtilTool.clickSound(),t.gText.color=16777215,t.yText.color=10066329,t.type=1},ytext:function(){e.UtilTool.clickSound(),t.gText.color=10066329,t.yText.color=16777215,t.type=2},send:function(){e.UtilTool.clickSound(),e.MainModel.getInstance().giveGift({userId:t.userData.userId,type:t.type,num:t.input.text,name:"币"},function(){t.updateState()},t)}}},n.prototype.handleInputChange=function(e){if(isNaN(Number(e.target.text)))e.target.text="";else{var t=new RegExp(/^[1-9]{1}\d*$/g),n=t.test(e.target.text);n||(e.target.text="")}},n.prototype.handleClick=function(e){var t=this;t.eventSets[e.target.eventname]&&t.eventSets[e.target.eventname]()},n.prototype.show=function(t,n){var a=this;e.LayerIndex.addIndex(),LayerManager.getInstance().setTopMask(!0,.5,e.LayerIndex.getIndex());var i=LayerManager.getInstance().topLay;i.addElement(a),a.userData=t},n.prototype.hide=function(){var t=this;0!=e.LayerIndex.getIndex()&&e.LayerIndex.subIndex(),LayerManager.getInstance().setTopMask(!0,.5,e.LayerIndex.getIndex()),t.parent.removeElement(t)},n}(GYLite.GYUIComponent);e.GiveGoldDialogView=t,__reflect(t.prototype,"main.GiveGoldDialogView")}(main||(main={}));var main;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.modulePreStart=function(){t.prototype.modulePreStart.call(this),e.TheFirstGame.getInstance().isFirstGame=!0;var n=this;n.resetSize(1360,680,LayerManager.SHOWALL)},n.prototype.start=function(){t.prototype.start.call(this)},n.prototype.runGame=function(){},n.prototype.resize=function(e,t){},n.prototype.dispose=function(){t.prototype.dispose.call(this)},n.prototype.show=function(n){void 0===n&&(n=null);var a=this;t.prototype.show.call(this,n),a.back=SkinManager.createImage(a,0,0,URLConf.mainImg+"war_bg_2.jpg"),a.back.horizonalCenter=a.back.verticalCenter=0,a.betView=e.BetView.getInstance(),a.betView.horizonalCenter=3,a.betView.top=420,a.addElement(a.betView),a.gameView=e.GameView.getInstance(),a.gameView.horizonalCenter=0,a.gameView.top=80,a.addElement(a.gameView),a.trumpetTop=e.TrumpetTopView.getInstance(),a.trumpetTop.horizonalCenter=0,a.trumpetTop.y=0,a.addElement(a.trumpetTop),a.sideTopLeft=e.SideTopLeftView.getInstance(),a.sideTopLeft.left=0,a.sideTopLeft.verticalCenter=0,a.addElement(a.sideTopLeft),a.sideBottomMid=e.SideBottomMidView.getInstance(),a.sideBottomMid.bottom=0,a.sideBottomMid.horizonalCenter=0,a.addElement(a.sideBottomMid),a.sideTopRight=e.SideTopRightView.getInstance(),a.sideTopRight.right=0,a.sideTopRight.verticalCenter=0,a.addElement(a.sideTopRight),UserData.getInstance().token&&e.PersonalModel.getInstance().getMyInfo(function(e){a.sideTopLeft.notifyChatView(e)}),document.addEventListener("keydown",a.handleKeyborad.bind(a))},n.prototype.handleKeyborad=function(t){13==t.keyCode&&e.EventTranspond.getInstance().transpond()},n.prototype.hide=function(){t.prototype.hide.call(this),SoundManager.instance.closeBGM(),e.TheFirstGame.getInstance().isFirstGame=!1},n.prototype.handleMessage=function(e){},n.prototype.loginout=function(){e.PersonalModel.getInstance().logout()},n}(ModuleBase);e.Module=t,__reflect(t.prototype,"main.Module")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var e=t.call(this)||this;e._timeId=0,e._delay=5e3;var n=e;return n.visible=!1,n.textQueue=[],n.back=SkinManager.createImage(n,0,0,"rms_toast_bg_png",URLConf.mainImg+"d2sheet.png"),n.back.height=n.back.height>>1,n.nickName=SkinManager.createText(n,0,0,"",16777215,18),n.text=SkinManager.createText(n,0,0,"",16777215,18),e}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.countEnd=function(){var e=this;GYLite.TimeManager.unTimeOut(e._timeId,e.countEnd,e),e._timeId=0,e.visible=!1},n.prototype.start=function(){var t=this;if(!t._timeId){t._timeId=GYLite.TimeManager.timeOut(t.countEnd,t,t._delay);var n=t.textQueue.shift();t.nickName.text=n.nickName?n.nickName+" : ":"无 : ",t.nickName.color=e.NickNameColor.colorSets[n.grade],t.text.text=n.msg,t.nickName.x=t.width-(t.nickName.width+t.text.width)>>1,t.text.x=t.nickName.x+t.nickName.width+10}},n.prototype.updateList=function(t){var n=this;n.nickName.text=t.nickName?t.nickName+" : ":"无 : ",n.nickName.color=e.NickNameColor.colorSets[t.grade],n.text.text=t.msg,n.nickName.x=n.width-(n.nickName.width+n.text.width)>>1,n.text.x=n.nickName.x+n.nickName.width+10,n.nickName.y=n.text.y=n.back.height-n.nickName.height>>1,n._timeId&&n.countEnd(),n._timeId=GYLite.TimeManager.timeOut(n.countEnd,n,n._delay),n.visible=!0},n}(GYLite.GYUIComponent);e.TrumpetTopView=t,__reflect(t.prototype,"main.TrumpetTopView")}(main||(main={}));var main;!function(e){var t=function(e){function t(){var t=e.call(this)||this;t.type=1;var n=t;return n.addEventListener(egret.TouchEvent.TOUCH_TAP,n.handleClick,n),t}return __extends(t,e),t.prototype.config=function(e){var t=this;t._back=SkinManager.createImage(t,0,0,e.background,e.alias),t._selectedImg=SkinManager.createImage(t,0,0,e.select,e.alias),t._sourceImg=SkinManager.createImage(t,0,0,e.source,e.alias),t._back.width=t._selectedImg.width=t._sourceImg.width+20,t._back.height=t._selectedImg.height=t._sourceImg.height+10,t._sourceImg.x=t._back.width-t._sourceImg.width>>1,t._sourceImg.y=t._back.height-t._sourceImg.height>>1,t._selectedImg.visible=!1,t.invalidLayout()},t.prototype.handleClick=function(){var e=this;if(e.selectionGroup){var t=e.selectionGroup.curSelection;t.selected=!1,e.selected=!0,e.selectionGroup.curSelection=e}else e.selected=!e.selected},t.prototype.invalidLayout=function(){var e=this;if(e.selectionGroup){var t=e.selectionGroup.curSelection;t.selected=!0}},Object.defineProperty(t.prototype,"selected",{get:function(){var e=this;return e._selectedImg.visible},set:function(e){var t=this;t._selectedImg.visible=e},enumerable:!0,configurable:!0}),t}(GYLite.GYUIComponent);e.BetButton=t,__reflect(t.prototype,"main.BetButton")}(main||(main={}));var main;!function(e){var t=function(e){function t(){var t=e.call(this)||this,n=t;return n.numImg_1=SkinManager.createImage(n,0,0,"0",URLConf.gameSke+"war_status_font.png"),n.numImg_2=SkinManager.createImage(n,0,0,"0",URLConf.gameSke+"war_status_font.png"),n.numImg_2.x=n.numImg_1.x+n.numImg_1.width,t}return __extends(t,e),t.prototype.setData=function(e){var t=this,n=e.toString();if(e>=10){var a=n.charAt(0),i=n.charAt(1);t.numImg_1.source=Main.instance.getRes(a,URLConf.gameSke+"war_status_font.png"),t.numImg_2.source=Main.instance.getRes(i,URLConf.gameSke+"war_status_font.png")}else{var a=n.charAt(0);t.numImg_1.source=Main.instance.getRes("0",URLConf.gameSke+"war_status_font.png"),t.numImg_2.source=Main.instance.getRes(a,URLConf.gameSke+"war_status_font.png")}},t}(GYLite.GYUIComponent);e.CountDown=t,__reflect(t.prototype,"main.CountDown")}(main||(main={}));var main;!function(e){var t=function(e){function t(t){void 0===t&&(t="small");var n=e.call(this)||this,a=n,i=new GYMovieClip;return i.setDataPath(URLConf.gameSke+"war_movie_clips.json",URLConf.gameSke+"war_movie_clips.png"),i.setMovieName("small"==t?"TableItemSmall":"TableItemBig"),i.play(-1),a.addElement(i),a.width=i.width,a.height=i.height,a.alpha=0,a.tween=GYLite.GYTween.to(a,[GYLite.TweenData.getInstance("alpha",1,null)],500,0,a,a.complete,null,null,!1,!1),n}return __extends(t,e),t.prototype.complete=function(){var e=this;e.show&&(e.show=!1)},Object.defineProperty(t.prototype,"show",{get:function(){var e=this;return!!e.alpha},set:function(e){var t=this;e?t.tween.run():t.tween.run(!t.tween.isReserve)},enumerable:!0,configurable:!0}),t}(GYLite.GYUIComponent);e.EffectItem=t,__reflect(t.prototype,"main.EffectItem")}(main||(main={}));var main;!function(e){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.drawSkin=function(t){e.prototype.drawSkin.call(this,t);var n=this;t>=4?n.back.alpha=1:n.back.alpha=0},Object.defineProperty(t.prototype,"hostComponent",{get:function(){var e=this;return egret.superGetter(ImageButtonSkin,e,"hostComponent")},set:function(e){var t=this;t._hostComponent!=e&&(t._hostComponent&&(t.back=null),egret.superSetter(ImageButtonSkin,t,"hostComponent",e),t._hostComponent&&(t.back=new GYLite.GYImage,t.back.alpha=0,t.back.source=Main.instance.getRes("rms_top_list_tab_selected_bg_png",URLConf.mainImg+"d1sheet.png"),e.addElementAt(t.back,0),t._curSkin.x=t._hostComponent.width-t._curSkin.width>>1,t._curSkin.y=t._hostComponent.height-t._curSkin.height>>1))},enumerable:!0,configurable:!0}),t}(GYLite.RadioButtonSkin);e.MyRadioButtonSkin=t,__reflect(t.prototype,"main.MyRadioButtonSkin")}(main||(main={}));var main;!function(e){var t=function(){function e(){}return e}();e.SelectionGroup=t,__reflect(t.prototype,"main.SelectionGroup")}(main||(main={}));var main;!function(e){var t=function(e){function t(){var t=e.call(this)||this;t._isOpen=!0;var n=t;return n.width=350,n.height=60,n.slideButton=SkinManager.createImage(n,0,0,"rms_setting_toggle_selected_bg_png",URLConf.mainImg+"d2sheet.png"),n.slideButton.y=n.height-n.slideButton.height>>1,n.openText=SkinManager.createImage(n,0,0,"rms_setting_toggle_open_selected_png",URLConf.mainImg+"d2sheet.png"),n.openText.x=(n.width/2-n.openText.width)/2,n.openText.y=n.height-n.openText.height>>1,n.offText=SkinManager.createImage(n,0,0,"rms_setting_toggle_close_normal_png",URLConf.mainImg+"d2sheet.png"),n.offText.x=n.width/2+(n.width/2-n.offText.width)/2,n.offText.y=n.height-n.offText.height>>1,n.touchEnabled=!0,TemplateTool.setBackGrapics(n,0,0),n.bindeEvent(),t}return __extends(t,e),Object.defineProperty(t.prototype,"isOpen",{get:function(){var e=this;return e._isOpen},set:function(e){var t=this;t._isOpen=e,t.updateState()},enumerable:!0,configurable:!0}),t.prototype.bindeEvent=function(){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleClick,e)},t.prototype.handleClick=function(e){var t=this;t.isOpen=!t.isOpen,t.cb&&t.cb.call(t.to,t.isOpen)},t.prototype.updateState=function(){var e=this;e.isOpen?(e.slideButton.x=0,e.openText.source=Main.instance.getRes("rms_setting_toggle_open_selected_png",URLConf.mainImg+"d2sheet.png"),e.offText.source=Main.instance.getRes("rms_setting_toggle_close_normal_png",URLConf.mainImg+"d2sheet.png")):(e.slideButton.x=e.width/2,e.openText.source=Main.instance.getRes("rms_setting_toggle_open_normal_png",URLConf.mainImg+"d2sheet.png"),e.offText.source=Main.instance.getRes("rms_setting_toggle_close_selected_png",URLConf.mainImg+"d2sheet.png"))},t.prototype.bindClick=function(e,t){var n=this;n.cb=e,n.to=t},t}(GYLite.GYUIComponent);e.SwitchButton=t,__reflect(t.prototype,"main.SwitchButton")}(main||(main={}));var main;!function(e){var t=function(e){function t(){var t=e.call(this)||this;t.type=1;var n=t;n.back=SkinManager.createImage(n,0,0,"war_top_title_bg_png",URLConf.gameImg+"w1sheet.png"),n.back.anchorOffsetX=n.back.width,n.back.skewY=180,n.touchEnabled=!0;var a=SkinManager.createImage(n,n.back.x+16,n.back.y+8,"war_top_bet_selected_png",URLConf.gameImg+"w1sheet.png");SkinManager.createImage(n,a.x+a.width+36,a.y,"war_top_winner_selected_png",URLConf.gameImg+"w1sheet.png");return n.bindEvent(),t}return __extends(t,e),t.prototype.bindEvent=function(){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleClick,e)},t.prototype.handleClick=function(){var e=this;1==e.type?(e.type=2,e.back.anchorOffsetX=0,e.back.skewY=0):(e.type=1,e.back.anchorOffsetX=e.back.width,e.back.skewY=180),e.clickCallback&&e.clickCallback.call(e.clickThisobj,e.type)},t.prototype.bindClick=function(e,t){var n=this;n.clickCallback=e,n.clickThisobj=t},t}(GYLite.GYUIComponent);e.TabButton=t,__reflect(t.prototype,"main.TabButton")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var n=t.call(this)||this,a=n;a.back=SkinManager.createImage(a,0,0,"war_bet_setting_bg_png",URLConf.gameImg+"w2sheet.png"),a._jettonArr=[{select:!0,itemName:"1",num:1,source:"war_bet_setting_selected_count_1_png"},{select:!1,itemName:"10",num:10,source:"war_bet_setting_selected_count_10_png"},{select:!1,itemName:"100",num:100,source:"war_bet_setting_selected_count_100_png"},{select:!1,itemName:"1k",num:1e3,source:"war_bet_setting_selected_count_1k_png"},{select:!1,itemName:"1w",num:1e4,source:"war_bet_setting_selected_count_1w_png"},{select:!1,itemName:"5w",num:5e4,source:"war_bet_setting_selected_count_5w_png"},{select:!1,itemName:"10w",num:1e5,source:"war_bet_setting_selected_count_10w_png"},{select:!1,itemName:"all",num:-1,source:"war_bet_setting_selected_count_all_png"}],a._btns={},a._selectedSets={};for(var i=0;i<a._jettonArr.length;i++){var r=a._jettonArr[i],o=SkinManager.createImage(a,0,0,"war_bet_setting_selected_count__bormal_bg_png",URLConf.gameImg+"w1sheet.png"),s=SkinManager.createImage(a,0,0,"war_bet_setting_selected_count_bg_png",URLConf.gameImg+"w1sheet.png");if(o.width=48,4>i)o.x=106+i*(o.width+2),o.y=30;else{var c=i-4;o.x=106+c*(o.width+2),o.y=30+o.height+2}s.x=o.x,s.y=o.y,s.visible=r.select,r.select&&(a._selected=s);var g=SkinManager.createBtn2(a,0,0,[r.source],URLConf.gameImg+"w1sheet.png");g.x=o.x+(o.width-g.width>>1),g.y=o.y+(o.height-g.height>>1),a.addElement(g),g.itemName=r.itemName,g.betNum=r.num,a._btns[r.itemName]=g,a._selectedSets[r.itemName]=s}var l=new e.SelectionGroup;return a.GBtn=new e.BetButton,a.GBtn.touchEnabled=!0,a.GBtn.type=1,a.GBtn.selectionGroup=l,l.curSelection=a.GBtn,a.GBtn.x=320,a.GBtn.verticalCenter=0,a.GBtn.config({background:"war_bet_setting_selected_count__bormal_bg_png",source:"war_gold_img_png",select:"war_bet_setting_selected_count_bg_png",alias:URLConf.gameImg+"w1sheet.png"}),a.addElement(a.GBtn),a.YBtn=new e.BetButton,a.YBtn.touchEnabled=!0,a.YBtn.type=2,a.YBtn.selectionGroup=l,a.YBtn.x=a.GBtn.x+a.GBtn.width+5,a.YBtn.verticalCenter=0,a.YBtn.config({background:"war_bet_setting_selected_count__bormal_bg_png",source:"war_silver_img_png",select:"war_bet_setting_selected_count_bg_png",alias:URLConf.gameImg+"w1sheet.png"}),a.addElement(a.YBtn),a.keepingBtn=SkinManager.createBtn2(a,0,0,["war_bet_setting_continue_btn_png"],URLConf.gameImg+"w1sheet.png"),a.keepingBtn.right=70,a.keepingBtn.verticalCenter=0,a.bindEvent(),n}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.bindEvent=function(){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleClick,e),e.GBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleBetType,e),e.YBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleBetType,e),e.keepingBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleKeepingBet,e)},n.prototype.handleBetType=function(t){var n=this;e.UtilTool.clickSound(),n.betType=t.target.type,e.BetModel.getInstance().setData(n.betType,n.betNum)},n.prototype.handleClick=function(t){var n=this;if(t.target.itemName){e.UtilTool.clickSound();var a=t.target.itemName;n._selected&&(n._selected.visible=!1),n._selectedSets[a].visible=!0,n._selected=n._selectedSets[a],n.betNum=t.target.betNum,e.BetModel.getInstance().setData(n.betType,n.betNum)}},n.prototype.handleKeepingBet=function(){if(0!=e.BetModel.getInstance().lastSum.length){e.UtilTool.clickSound();var t=e.BetModel.getInstance().lastSum;e.BetModel.getInstance().bet(t),e.SideBottomMidView.getInstance().keeping(t)}},n.prototype.resetState=function(){var e=this;e._selected&&(e._selected.visible=!1),e._selectedSets[1].visible=!0,e._selected=e._selectedSets[1],e.betNum=1},n}(GYLite.GYUIComponent);e.BetView=t,__reflect(t.prototype,"main.BetView")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var n=t.call(this)||this;n.round=0,n.curIndex=0,n.result=null;var a=n;a.effectAry=[],a.effectSets={};for(var i=["k","h1","g1","f1","e1","h2","g2","f2","e2","h3","g3","f3","e3","i","a3","b3","c3","d3","a2","b2","c2","d2","a1","b1","c1","d1"],r=0,o=i.length;o>r;r++)if(0==r||13==r){var s=new e.EffectItem("big");a.addElement(s),a.effectAry.push(s),a.effectSets[i[r]]=s}else{var s=new e.EffectItem;a.addElement(s),a.effectAry.push(s),a.effectSets[i[r]]=s}return n}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.updateChildPosition=function(){for(var e=this,t=0;26>t;t++){var n=e.effectAry[t];0==t?(n.x=e.width-n.width>>1,n.y=46):4>=t?(n.x=(e.width-n.width)/2+40+58*t,n.y=46):t>=5&&8>=t?(n.x=e.width-n.width-38,n.y=58*(t-3)-12):t>=9&&12>=t?(n.x=(e.width-n.width)/2+40+58*(13-t),n.y=340):13==t?(n.x=e.width-n.width>>1,n.y=340):t>=14&&17>=t?(n.x=58*(18-t)-22,n.y=340):t>=18&&21>=t?(n.x=36,n.y=58*(22-t)+46):t>=22&&25>=t&&(n.x=58*(t-21)-22,n.y=46)}},n.prototype.setResult=function(e){var t=this;t.result=e,console.log("开奖结果: ",e),t.run(2,function(){},t)},n.prototype.run=function(e,t,n){void 0===e&&(e=2);var a=this;return a.effectAry[a.curIndex++].show=!0,a.curIndex==a.effectAry.length?(a.curIndex=0,++a.round==e?(t&&t(n),void(a.round=0)):void a.run(e,t,n)):void GYLite.TimeManager.timeOut(function(){a.run(e,t,n)},a,60)},n.prototype.findResult=function(e,t,n){var a=this;return a.effectAry[a.curIndex++].show=!0,a.curIndex===a.effectSets[e]?void(a.curIndex=0):void GYLite.TimeManager.timeOut(function(){a.findResult(e,t,n)},a,60)},n}(GYLite.GYUIComponent);e.GameEffect=t,__reflect(t.prototype,"main.GameEffect")}(main||(main={}));var main;!function(e){var t=function(){function t(){this._timeId=0,this.timeType="1"}return t.getInstance=function(){return t._instance||(t._instance=new t)},t.prototype.run=function(){var t=this,n=Date.now();e.GameModel.getInstance().getTime(function(e){var a=e.data+(Date.now()-n),i=new Date(a).getSeconds();t.gameTtime=i,t.gameStart()},t),e.GameModel.getInstance().getLastWinRank(),e.GameModel.getInstance().getHistoryLottery()},t.prototype.gameStart=function(){var e=this,t=0;e.gameTtime<=25&&(t=25-e.gameTtime,e.betTime=t),e._timeId=GYLite.TimeManager.timeInterval(e.timeStart,e,1e3)},t.prototype.timeStart=function(){var t=this,n=++t.gameTtime;t.timeOut=!0,n>=0&&26>n?(1==n&&SoundManager.instance.play(e.Conf.sound+"rms_round_start.mp3"),23==n&&SoundManager.instance.play(e.Conf.sound+"rms_bet_alarm.mp3",0,2,function(){SoundManager.instance.play(e.Conf.sound+"rms_bet_end.mp3")}),t.timeOut=!1,t.betTime=25-n,e.GameView.getInstance().slideUp(),e.GameView.getInstance().updateCountDown(t.betTime,1),e.GameModel.getInstance().getBettingTotal(),e.GameModel.getInstance().getBettingRank()):n>=26&&32>n?(e.GameView.getInstance().slideDown(),e.GameView.getInstance().updateCountDown(31-n,2)):n>=32&&58>n?33==n&&e.GameModel.getInstance().getResult(function(t){e.GameEffect.getInstance().setResult(t.data)},t):n>58&&(e.SideBottomMidView.getInstance().clearBet(),GYLite.TimeManager.unTimeInterval(t._timeId,t.timeStart,t),t.run())},t.prototype.stop=function(){var t=this;GYLite.TimeManager.unTimeInterval(t._timeId,t.timeStart,t),e.SideBottomMidView.getInstance().clearBet()},t}();e.GameTime=t,__reflect(t.prototype,"main.GameTime")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var n=t.call(this)||this;n.isBet=!1;var a=n;a.width=692,a.height=460,a.back=SkinManager.createImage(a,0,0,"war_tar_bg_png",URLConf.gameImg+"w1sheet.png"),a.gem=new GYMovieClip,a.gem.setDataPath(URLConf.gameSke+"war_movie_clips.json",URLConf.gameSke+"war_movie_clips.png"),a.gem.setMovieName("DiamondFlash"),a.gem.play(-1),a.gem.horizonalCenter=0,a.addElement(a.gem),a.rank4=e.Rank4.getInstance(),a.rank4.width=a.width,a.rank4.height=a.height,a.addElement(a.rank4);var i=SkinManager.createImage(a,0,0,"war_status_bg_png",URLConf.gameImg+"w1sheet.png");return i.horizonalCenter=-3,i.verticalCenter=-84,a.status=SkinManager.createImage(a,0,0,""),a.status.horizonalCenter=-3,a.status.verticalCenter=-84,a.countDown=new e.CountDown,a.countDown.horizonalCenter=-2,a.countDown.verticalCenter=-26,a.addElement(a.countDown),a.resultListView=e.ResultListView.getInstance(),a.resultListView.y=266,a.resultListView.width=a.width,a.resultListView.height=54,a.addElement(a.resultListView),a.gameEffect=e.GameEffect.getInstance(),a.gameEffect.width=a.width,a.gameEffect.height=a.height,a.gameEffect.updateChildPosition(),a.addElement(a.gameEffect),a.touchEnabled=!0,a.bindEvent(),n}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.bindEvent=function(){},n.prototype.slideUp=function(){var e=this;e.isBet||(e.isBet=!0,e.tween=GYLite.GYTween.to(e,[GYLite.TweenData.getInstance("top",0,0/0)],500,0,e,null,null,null,!0,!1))},n.prototype.slideDown=function(){var e=this;e.isBet&&(e.isBet=!1,e.tween&&e.tween.run(!e.tween.isReserve))},n.prototype.updateCountDown=function(e,t){var n=this;1==t?n.status.source=Main.instance.getRes("war_status_bet_png",URLConf.gameImg+"w1sheet.png"):2==t&&(n.status.source=Main.instance.getRes("war_status_locked_png",URLConf.gameImg+"w1sheet.png")),n.countDown&&n.countDown.setData(e)},n.prototype.updateResultList=function(e){var t=this;t.resultListView.updateList(e.data)},n}(GYLite.GYUIComponent);e.GameView=t,__reflect(t.prototype,"main.GameView")}(main||(main={}));var main;!function(e){var t=function(e){function t(){var t=e.call(this)||this,i=t;i.itemSets={};for(var r=0;4>r;r++)if(r%2==1){var o=new n;i.addElement(o),o.x=116,2>r?o.y=128:(o.y=188,o.reverseback=!0),i.itemSets[r-1]=o}else{var o=new a;i.addElement(o),o.x=395,2>r?o.y=128:(o.y=188,o.reverseback=!0),i.itemSets[r+1]=o}return t}return __extends(t,e),t.getInstance=function(){return t._instance||(t._instance=new t)},t.prototype.updateRankView=function(e){for(var t=this,n=0,a=e.length;a>n;n++)0==n?t.itemSets[n].setData(e[n],!0):t.itemSets[n].setData(e[n])},t}(GYLite.GYUIComponent);e.Rank4=t,__reflect(t.prototype,"main.Rank4");var n=function(e){function t(){var t=e.call(this)||this,n=t;n.width=175,n.height=58,n.back=SkinManager.createImage(n,0,0,"war_medal_top_list_item_bg_png",URLConf.gameImg+"w1sheet.png"),n.head=SkinManager.createImage(n,0,0,""),n.frame=SkinManager.createImage(n,0,0,"war_medal_top_list_item_head_bg_png",URLConf.gameImg+"w1sheet.png"),n.head.width=n.frame.width,n.head.height=n.frame.height,n.head.verticalCenter=n.frame.verticalCenter=0,n.head.left=n.frame.left=5,n.medal=SkinManager.createImage(n,0,0,"game_cion_silver_medal_small_png",URLConf.mainImg+"d1sheet.png"),n.userNameText=SkinManager.createText(n,n.frame.x+n.frame.width+10,5,"",16777215,14);SkinManager.createImage(n,n.userNameText.x+8,23,"war_medal_top_list_coin_bg_png",URLConf.gameImg+"w3sheet.png"),SkinManager.createImage(n,n.userNameText.x+8,38,"war_medal_top_list_coin_bg_png",URLConf.gameImg+"w3sheet.png"),SkinManager.createImage(n,n.userNameText.x,14,"war_top_gold_png",URLConf.gameImg+"w1sheet.png"),SkinManager.createImage(n,n.userNameText.x,31,"war_top_silver_png",URLConf.gameImg+"w1sheet.png");return n.GText=SkinManager.createText(n,88,25,"0",15715586,12),n.YText=SkinManager.createText(n,88,40,"0",16777215,12),t}return __extends(t,e),Object.defineProperty(t.prototype,"reverseback",{set:function(e){var t=this;e&&(t.back.anchorOffsetY=t.back.height,t.back.skewX=180)},enumerable:!0,configurable:!0}),t.prototype.setData=function(e,t){var n=this;t&&(n.medal.source=Main.instance.getRes("game_cion_gold_medal_small_png",URLConf.mainImg+"d1sheet.png")),n.head.source=Main.instance.getRes(e.avatar,"main/img/head.png"),n.userNameText.text=e.nickName,n.GText.text=e.wingold,n.YText.text=e.winsilver},t}(GYLite.GYUIComponent);e.Rank4ItemL=n,__reflect(n.prototype,"main.Rank4ItemL");var a=function(e){function t(){var t=e.call(this)||this,n=t;n.width=175,n.height=58,n.back=SkinManager.createImage(n,0,0,"war_medal_top_list_item_bg_png",URLConf.gameImg+"w1sheet.png"),n.back.anchorOffsetX=n.back.width,n.back.skewY=180,n.head=SkinManager.createImage(n,0,0,""),n.frame=SkinManager.createImage(n,0,0,"war_medal_top_list_item_head_bg_png",URLConf.gameImg+"w1sheet.png"),n.head.width=n.frame.width,n.head.height=n.frame.height,n.head.verticalCenter=n.frame.verticalCenter=0,n.head.right=n.frame.right=5,n.medal=SkinManager.createImage(n,0,0,"game_cion_silver_medal_small_png",URLConf.mainImg+"d1sheet.png"),n.medal.right=0,n.userNameText=SkinManager.createText(n,0,5,"",16777215,14),n.userNameText.right=n.frame.x+n.frame.width+10;var a=SkinManager.createImage(n,0,23,"war_medal_top_list_coin_bg_png",URLConf.gameImg+"w3sheet.png");a.anchorOffsetX=a.width,a.skewY=180;var i=SkinManager.createImage(n,0,38,"war_medal_top_list_coin_bg_png",URLConf.gameImg+"w3sheet.png");i.anchorOffsetX=i.width,i.skewY=180;var r=SkinManager.createImage(n,0,14,"war_top_gold_png",URLConf.gameImg+"w1sheet.png"),o=SkinManager.createImage(n,0,31,"war_top_silver_png",URLConf.gameImg+"w1sheet.png");return r.right=o.right=n.userNameText.right,n.GText=SkinManager.createText(n,0,25,"0",15715586,12),n.YText=SkinManager.createText(n,0,40,"0",16777215,12),n.GText.right=n.YText.right=88,t}return __extends(t,e),Object.defineProperty(t.prototype,"reverseback",{set:function(e){var t=this;e&&(t.back.anchorOffsetY=t.back.height,t.back.skewX=180)},enumerable:!0,configurable:!0}),t.prototype.setData=function(e){var t=this;t.head.source=Main.instance.getRes(e.avatar,"main/img/head.png"),t.userNameText.text=e.nickName,t.GText.text=e.wingold,t.YText.text=e.winsilver},t}(GYLite.GYUIComponent);e.Rank4ItemR=a,__reflect(a.prototype,"main.Rank4ItemR")}(main||(main={}));var main;!function(e){var t=function(t){function a(){var e=t.call(this)||this,a=e;return a.leftBtn=SkinManager.createBtn(a,118,0,"war_history_btn_png",null,null,URLConf.gameImg+"w2sheet.png"),a.leftBtn.verticalCenter=0,a.leftBtn.name="l",a.list=SkinManager.createListH(a,a.leftBtn.x+a.leftBtn.width+20,0,360,54,n),a.list.scrollerPolicy=2,a.rigthBtn=SkinManager.createBtn(a,a.list.x+a.list.width+20,0,"war_history_btn_png",null,null,URLConf.gameImg+"w2sheet.png"),a.rigthBtn.name="r",a.rigthBtn.anchorOffsetX=a.rigthBtn.width,a.rigthBtn.skewY=180,a.rigthBtn.verticalCenter=0,a.bindEvent(),e}return __extends(a,t),a.getInstance=function(){return a._instance||(a._instance=new a)},a.prototype.bindEvent=function(){var e=this;e.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleScrollList,e),e.rigthBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleScrollList,e)},a.prototype.handleScrollList=function(t){var n=this;e.UtilTool.clickSound(),"l"==t.target.name?n.list.hScroller.scrollToLeft(180):"r"==t.target.name&&n.list.hScroller.scrollToRight(180)},a.prototype.updateList=function(e){var t=this;t.list.dataProvider=e},a}(GYLite.GYUIComponent);e.ResultListView=t,__reflect(t.prototype,"main.ResultListView");var n=function(e){function t(){var t=e.call(this)||this,n=t;return n.imgSets={kq:"war_history_gun_png",hc:"war_history_train_png",ts:"war_history_angle_png",kl:"war_history_all_death_png",dj:"war_history_multiple_png",sz:"war_history_tribal_png",rz:"war_history_union_png",a:"war_history_tribal_orc_png",b:"war_history_tribal_warlock_png",c:"war_history_tribal_minotaur_png",d:"war_history_tribal_chief_png",k:"war_history_balck_dragon_png",h:"war_history_union_king_png",g:"war_history_union_knight_png",f:"war_history_union_master_png",e:"war_history_union_warrior_png"},n.width=45,n.height=54,n.resultImg=SkinManager.createImage(n,0,0,"",URLConf.gameImg+"w2sheet.png"),n.resultImg.horizonalCenter=0,t}return __extends(t,e),t.prototype.setData=function(e){var t=this;return e?(t.visible=!0,void(t.resultImg.source=Main.instance.getRes(t.imgSets[e],URLConf.gameImg+"w2sheet.png"))):void(t.visible=!1)},t}(GYLite.ItemRender);e.ResultItem=n,__reflect(n.prototype,"main.ResultItem")}(main||(main={}));var main;!function(e){var t=function(){function e(){}return e.prototype.start=function(){},e.prototype.stop=function(){},e}();e.Sound=t,__reflect(t.prototype,"main.Sound")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var e=t.call(this)||this,n=e;n.eventSets={},n.btnSets={},n.userData={},n.width=846,n.height=520,n.horizonalCenter=0,n.verticalCenter=0;var a=SkinManager.createImage(n,0,0,"rms_userinfo_bg_png",URLConf.mainImg+"d2sheet.png");a.anchorOffsetX=a.width,a.skewY=180,a.x=(n.width-2*a.width)/2,a.y=(n.height-a.height)/2;var i=SkinManager.createImage(n,0,0,"rms_userinfo_bg_png",URLConf.mainImg+"d2sheet.png");i.x=a.x+a.width,i.y=a.y,n.close=SkinManager.createBtn2(n,0,0,["rms_view_close_btn_png"],URLConf.mainImg+"d1sheet.png",null,null,ScaleButtonSkin2),n.close.eventname="close",n.close.top=-20,n.close.right=-20;var r=SkinManager.createImage(n,0,40,"rms_user_head_bg_png",URLConf.mainImg+"d2sheet.png");r.x=n.width-r.width>>1,n.head=SkinManager.createImage(n,0,0,"r",URLConf.mainImg+"head.png"),n.head.width=r.width-43,n.head.height=r.height-43,n.head.x=n.width-n.head.width>>1,n.head.y=r.y+18;var o=new GYLite.GYSprite;o.x=n.head.x,o.y=n.head.y,o.width=o.height=n.head.width;var s=o.graphics;s.beginFill(0,1),s.drawRoundRect(0,0,n.head.width,n.head.width,n.head.width),s.endFill(),n.head.mask=o,n.addElement(o);var c=SkinManager.createImage(n,0,250,"rms_userinfo_id_bg_png",URLConf.mainImg+"d2sheet.png");c.x=n.width-c.width>>1,n.nickname=SkinManager.createText(n,0,226,"",16777215,18,"center",200,50),n.nickname.x=n.width-n.nickname.width>>1,n.userid=SkinManager.createText(n,0,262,"",9727047,14,"center",110,25),n.userid.x=n.width-n.userid.width>>1,n.gText=SkinManager.createText(n,0,192,"????",16777215,16,"right",130,42),n.gText.x=80,n.yText=SkinManager.createText(n,0,192,"????",16777215,16,"left",130,42),n.yText.right=80;
var g=SkinManager.createImage(n,n.gText.x+n.gText.width+20,n.gText.y-12,"game_cion_gold_big_png",URLConf.mainImg+"d1sheet.png"),l=SkinManager.createImage(n,0,g.y,"game_cion_silver_big_png",URLConf.mainImg+"d1sheet.png");l.right=80+n.yText.width+20;var m=SkinManager.createText(n,0,484,"");m.htmlText="提示: 鲜花每个<font color=0xEFCD02>200金币</font>, 红包每个<font color=0xEFCD02>2000金币</font>, 大便每个<font color=0xEFCD02>200金币</font>",m.x=n.width-m.width>>1;for(var u=["rms_userinfo_flower_btn_png","rms_userinfo_floredpacket_btn_png","rms_userinfo_shit_btn_png","rms_userinfo_diamond_btn_png"],d=0,p=u.length;p>d;d++){var _=SkinManager.createBtn2(n,0,350,[u[d]],URLConf.mainImg+"d2sheet.png",null,null,ScaleButtonSkin2);_.eventname="btn_"+d,_.x=150+d*(_.width+70)}return n.bindEvent(),e}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.bindEvent=function(){var t=this;t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.handleClick,t),t.eventSets={close:function(){e.UtilTool.clickSound(),t.hide()},btn_0:function(){e.UtilTool.clickSound(),e.MainModel.getInstance().giveGift({userId:t.userData.userId,type:1,num:"200",name:"鲜花"})},btn_1:function(){e.UtilTool.clickSound(),e.MainModel.getInstance().giveGift({userId:t.userData.userId,type:1,num:"2000",name:"红包"})},btn_2:function(){e.UtilTool.clickSound(),e.MainModel.getInstance().giveGift({userId:t.userData.userId,type:1,num:"200",name:"大便"})},btn_3:function(){e.UtilTool.clickSound(),e.GiveGoldDialogView.getInstance().show(t.userData)}}},n.prototype.handleClick=function(e){var t=this;t.eventSets[e.target.eventname]&&t.eventSets[e.target.eventname]()},n.prototype.setData=function(e){var t=this;t.head.source=Main.instance.getRes(e.avatar,URLConf.mainImg+"head.png"),t.nickname.text=e.nickName,t.userid.text="ID "+e.userId,t.gText.text=0==e.privacy?"????":e.gold,t.yText.text=0==e.privacy?"????":e.silver},n.prototype.show=function(t){var n=this;e.LayerIndex.addIndex(),LayerManager.getInstance().setTopMask(!0,.5,e.LayerIndex.getIndex());var a=LayerManager.getInstance().topLay;a.addElement(n),n.userData=t,n.setData(t)},n.prototype.hide=function(){var t=this;0!=e.LayerIndex.getIndex()?(e.LayerIndex.subIndex(),LayerManager.getInstance().setTopMask(!0,.5,e.LayerIndex.getIndex())):(e.LayerIndex.curIndex=-1,LayerManager.getInstance().setTopMask(!1)),t.parent.removeElement(t)},n}(GYLite.GYUIComponent);e.GiveGiftDialogView=t,__reflect(t.prototype,"main.GiveGiftDialogView")}(main||(main={}));var main;!function(e){var t=function(){function e(){}return e.addIndex=function(){var e=this;++e.curIndex},e.getIndex=function(){var e=this;return e.curIndex},e.subIndex=function(){var e=this;--e.curIndex},e.curIndex=-1,e}();e.LayerIndex=t,__reflect(t.prototype,"main.LayerIndex")}(main||(main={}));var main;!function(e){var t=function(){function e(){}return e.colorSets={0:12213083,1:16777215,2:4171177,3:4171177,4:10400859,5:10400859,6:12213083},e}();e.NickNameColor=t,__reflect(t.prototype,"main.NickNameColor")}(main||(main={}));var main;!function(e){var t=function(){function e(){}return e.getInstance=function(){return e._instance||(e._instance=new e)},e}();e.TheFirstGame=t,__reflect(t.prototype,"main.TheFirstGame")}(main||(main={}));var main;!function(e){var t=function(){function t(){}return t.getGrade=function(e){return 500>=e?"1":e>500&&1e3>=e?"2":e>1e3&&3e3>=e?"3":e>3e3&&5e3>=e?"4":e>5e3&&1e4>=e?"5":"6"},t.formatBet=function(e){var t="-";return e>=1e4?t=(e/1e4).toString()+"W":e>=0&&1e4>e&&(t=e.toString()),t},t.clickSound=function(){SoundManager.instance.play(e.Conf.sound+"rms_button_clicked.mp3",0,1,null,null,1)},t.effectSound=function(t){SoundManager.instance.play(e.Conf.sound+"war_turn_sound_c9acef1.mp3",0,1,null,null,100)},t}();e.UtilTool=t,__reflect(t.prototype,"main.UtilTool")}(main||(main={}));var main;!function(e){var t=function(){function t(){this.betType=1,this.betNum=1;var e=this;e.lastSum=[],e.betSets={},e.betNumObj={g:0,y:0}}return t.getInstance=function(){return t._instance||(t._instance=new t)},t.prototype.setData=function(e,t){var n=this;e&&(n.betType=e),t&&(n.betNum=t)},t.prototype.setBetSets=function(e){var t=this,n=[],a={type:t.betType,num:t.betNum};return n.push({role:e,infos:[a]}),t.bet(n),a},t.prototype.setLastRoundSum=function(e){var t=this;e.length>0&&(t.lastSum=e)},t.prototype.setCurrentRoundSum=function(t,n){e.CurrentRoundSumView.getInstance().render({g:t,y:n})},t.prototype.bet=function(t){var n=this;BaseHttp.getInstance().sendMsg("/war/game/bet",t,HTTPConf.M_POST,function(t){e.PersonalModel.getInstance().getMyInfo()},n)},t}();e.BetModel=t,__reflect(t.prototype,"main.BetModel")}(main||(main={}));var main;!function(e){var t=function(){function t(){var e=this;e.lastWinRank=[]}return t.getInstance=function(){return t._instance||(t._instance=new t)},t.prototype.getTime=function(e,t){BaseHttp.getInstance().sendMsg("/war/game/getTime",{},HTTPConf.M_GET,e,t)},t.prototype.getHistoryLottery=function(t,n){var a=this;BaseHttp.getInstance().sendMsg("/war/game/getHistoryLottery",{},HTTPConf.M_GET,function(a){e.GameView.getInstance().updateResultList(a),t&&t.call(n,a)},a)},t.prototype.getLastWinRank=function(t,n){var a=this;BaseHttp.getInstance().sendMsg("/war/game/getLastWinRank",{},HTTPConf.M_GET,function(i){a.lastWinRank=i.data,e.Rank4.getInstance().updateRankView(i.data),t&&t.call(n,i)},a)},t.prototype.getBettingRank=function(t,n){var a=this;BaseHttp.getInstance().sendMsg("/war/game/getBettingRank",{},HTTPConf.M_GET,function(a){e.BetRankView.getInstance().updateRankList(a.data),t&&t.call(n,a)},a)},t.prototype.getBettingTotal=function(e,t){BaseHttp.getInstance().sendMsg("/war/game/getBettingTotal",{},HTTPConf.M_GET,e,t)},t.prototype.getResult=function(e,t){BaseHttp.getInstance().sendMsg("/war/game/getResult",{},HTTPConf.M_GET,e,t)},t.prototype.selectWinRank=function(t,n,a){var i=this;BaseHttp.getInstance().sendMsg("/war/accountrecord/selectWinRank",t,HTTPConf.M_GET,function(t){e.RankDialogView.getInstance().updateRankList(t.data),n&&n.call(a,t)},i)},t.prototype.getVipRank=function(t,n){var a=this;BaseHttp.getInstance().sendMsg("/war/game/getVipRank",{},HTTPConf.M_GET,function(a){e.RankDialogView.getInstance().updateRankList(a.data,"vip"),t&&t.call(n,a)},a)},t}();e.GameModel=t,__reflect(t.prototype,"main.GameModel")}(main||(main={}));var main;!function(e){var t=function(){function t(){}return t.getInstance=function(){return t._instance||(t._instance=new t)},t.prototype.giveGift=function(t,n,a){BaseHttp.getInstance().sendMsg("/war/game/giveGift",t,HTTPConf.M_POST,function(t){e.PersonalModel.getInstance().getMyInfo(),n&&n.call(a)})},t.prototype.addNotice=function(e){BaseHttp.getInstance().sendMsg("/war/game/addNotice",{msg:e},HTTPConf.M_POST,function(e){})},t.prototype.getMyRecord=function(){BaseHttp.getInstance().sendMsg("/war/accountrecord/getMyRecord",{},HTTPConf.M_GET,function(t){e.BetDetailDialogView.getInstance().setData(t.data)})},t.prototype.getInfoById=function(t){BaseHttp.getInstance().sendMsg("/war/user/getInfoById",{userId:t},HTTPConf.M_GET,function(t){e.GiveGiftDialogView.getInstance().show(t.data)})},t}();e.MainModel=t,__reflect(t.prototype,"main.MainModel")}(main||(main={}));var main;!function(e){var t=function(){function t(){}return t.getInstance=function(){return t._instance||(t._instance=new t)},t.prototype.setData=function(t){var n=this;for(var a in t)n[a]=t[a];n.grade=e.UtilTool.getGrade(n.exp)},t.prototype.updatePrivacy=function(e){BaseHttp.getInstance().sendMsg("/war/user/updatePrivacy",{privacy:e},HTTPConf.M_POST,function(e){})},t.prototype.getMyInfo=function(t,n){var a=this;BaseHttp.getInstance().sendMsg("/war/user/getMyInfo",{},HTTPConf.M_GET,function(i){a.setData(i.data),e.PersonalView.getInstance().setData(i.data),e.SettingDialogView.getInstance().setData(i.data),t&&t.call(n,i)})},t.prototype.logout=function(t,n){BaseHttp.getInstance().sendMsg("/logout",{},HTTPConf.M_POST,function(a){UserData.getInstance().token="",sessionStorage.removeItem("token"),e.GameTime.getInstance().stop(),UIControl.getInstance().closeCurUI(),UIControl.getInstance().openUI("login"),t&&t.call(n,a)})},t}();e.PersonalModel=t,__reflect(t.prototype,"main.PersonalModel")}(main||(main={}));var main;!function(e){var t=function(t){function a(){var e=t.call(this)||this,a=e;a.height=128,a.items={};for(var i=[{itemName:"i",source:"war_bet_item_tribal_png",multiple:"war_bet_mutiple_2_png"},{itemName:"a",source:"war_bet_item_orc_png",multiple:"war_bet_mutiple_6_png"},{itemName:"b",source:"war_bet_item_warlock_png",multiple:"war_bet_mutiple_8_png"},{itemName:"c",source:"war_bet_item_minotaur_png",multiple:"war_bet_mutiple_8_png"},{itemName:"d",source:"war_bet_item_chief_png",multiple:"war_bet_mutiple_12_png"},{itemName:"k",source:"war_bet_item_dragon_png",multiple:"war_bet_mutiple_24_99_png"},{itemName:"h",source:"war_bet_item_king_png",multiple:"war_bet_mutiple_12_png"},{itemName:"g",source:"war_bet_item_knight_png",multiple:"war_bet_mutiple_8_png"},{itemName:"f",source:"war_bet_item_master_png",multiple:"war_bet_mutiple_8_png"},{itemName:"e",source:"war_bet_item_warrior_png",multiple:"war_bet_mutiple_6_png"},{itemName:"j",source:"war_bet_item_union_png",multiple:"war_bet_mutiple_2_png"}],r=null,o=0,s=i.length;s>o;o++){var c=new n;a.items[i[o].itemName]=c,a.addElement(c),r||(r=c),c.x=o*r.width,c.setData(i[o]),c.bindChangeNum(a.handleChangeBetItemNum,a)}return e}return __extends(a,t),a.getInstance=function(){return a._instance||(a._instance=new a)},a.prototype.handleChangeBetItemNum=function(){var t=this,n=0,a=0;for(var i in t.items){var r=t.items[i],o=Number(r.G.text),s=Number(r.Y.text);n+=o,a+=s}e.BetModel.getInstance().setCurrentRoundSum(n,a)},a.prototype.clearBet=function(){var t=this,n=[];for(var a in t.items){var i=t.items[a],r=Number(i.G.text),o=Number(i.Y.text);if(r||o){var s={};s.role=a,r&&(s.infos||(s.infos=[]),s.infos.push({type:"1",num:r})),o&&(s.infos||(s.infos=[]),s.infos.push({type:"2",num:o})),n.push(s)}i.handleReset()}e.BetModel.getInstance().setLastRoundSum(n),e.BetModel.getInstance().setCurrentRoundSum(0,0)},a.prototype.keeping=function(e){for(var t=this,n=0,a=e.length;a>n;n++)for(var i=e[n],r=i.role,o=i.infos,s=t.items[r],c=0,g=o.length;g>c;c++){var l=o[c];s.add(l.type,l.num),s.slideUp()}},a}(GYLite.GYUIComponent);e.SideBottomMidView=t,__reflect(t.prototype,"main.SideBottomMidView");var n=function(t){function n(){var e=t.call(this)||this,n=e;return n.width=74,n.height=128,n.back=SkinManager.createImage(n,0,0,"war_bet_item_coin_bg_png",URLConf.gameImg+"w1sheet.png"),n.back.horizonalCenter=0,n.G=SkinManager.createText(n,0,84,"0",15715586,12),n.Y=SkinManager.createText(n,0,n.G.y+n.G.height+5,"0",16777215,12),n.G.horizonalCenter=n.Y.horizonalCenter=0,n.subItem=new GYLite.GYUIComponent,n.subItem.x=2,n.subItem.y=60,n.addElement(n.subItem),n.itemImg=new GYLite.GYImage,n.itemImg.x=0,n.itemImg.y=0,n.subItem.addElement(n.itemImg),n.multiple=new GYLite.GYImage,n.multiple.horizonalCenter=0,n.multiple.bottom=10,n.subItem.addElement(n.multiple),n.bindEvent(),e}return __extends(n,t),n.prototype.bindEvent=function(){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleClick,e)},n.prototype.handleClick=function(){var t=this;if(!e.GameTime.getInstance().timeOut){e.UtilTool.clickSound(),t.slideUp();var n=e.BetModel.getInstance().setBetSets(t.itemName);t.add(n.type,n.num)}},n.prototype.handleReset=function(){var e=this;e.subItem.y=60,e.G.text="0",e.Y.text="0"},n.prototype.add=function(e,t){var n=this,a=0;1==e?(a=Number(n.G.text)+t,n.G.text=(Number(n.G.text)+t).toString()):(a=Number(n.Y.text)+t,n.Y.text=(Number(n.Y.text)+t).toString()),n.changeCallback&&n.changeCallback.call(n.changeThisobj)},n.prototype.slideUp=function(){var e=this;e.subItem.y=0},n.prototype.bindChangeNum=function(e,t){var n=this;n.changeCallback=e,n.changeThisobj=t},n.prototype.setData=function(e){var t=this;t.itemName=e.itemName,t.itemImg.source=Main.instance.getRes(e.source,URLConf.gameImg+"w1sheet.png"),t.multiple.source=Main.instance.getRes(e.multiple,URLConf.gameImg+"w1sheet.png");for(var n=t.numElement;--n>-1;){var a=t.getElementAt(n);a.touchEnabled=!0}},n}(GYLite.GYUIComponent);e.BottomMidViewItem=n,__reflect(n.prototype,"main.BottomMidViewItem")}(main||(main={}));var main;!function(e){var t=function(t){function a(){var e=t.call(this)||this,a=e;a.trumpet=SkinManager.createBtn(a,0,0,"rms_war_speaker_png",null,null,URLConf.gameImg+"w3sheet.png"),a.vb=new VerticalBox(n),a.vb.x=0,a.vb.y=a.trumpet.y+a.trumpet.height+5,a.vb.width=210,a.vb.height=350,a.vb.scroller.verticalPolicy=0,a.vb.scrollerViewPort.paddingTop=a.vb.scrollerViewPort.paddingBottom=5,a.addElement(a.vb);var i=SkinManager.createImage(a,-12,a.vb.y+a.vb.height+10,"war_chat_line_png",URLConf.gameImg+"w3sheet.png");return a.input=TemplateTool.createTextInput(a,0,i.y+i.height+2,160,30),a.send=SkinManager.createBtn(a,a.input.x+a.input.width+14,a.input.y,"war_send_msg_img_png",null,null,URLConf.gameImg+"w1sheet.png"),a.bindEvent(),e}return __extends(a,t),a.getInstance=function(){return a._instance||(a._instance=new a)},a.prototype.bindEvent=function(){var e=this;e.send.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleSendEvent,e),e.trumpet.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleTrumpet,e),e.input.addEventListener(egret.Event.FOCUS_IN,e.focusIn,e),e.input.addEventListener(egret.Event.FOCUS_OUT,e.focusOut,e),BaseWar.getInstance().bind("chatInput",e.handleSend,e)},a.prototype.handleSendEvent=function(e){var t=this;t.handleSend(t.input.text)},a.prototype.handleSend=function(t){var n=this;return e.UtilTool.clickSound(),"1"==e.PersonalModel.getInstance().black?void console.log("你被关进小黑屋, 联系管理员"):void(t&&(n.ws.send(n.input.text||t),n.input.text="",n.vb.scroller.scrollPosY=n.vb.scroller.scrollBarV.maximum))},a.prototype.handleTrumpet=function(){e.UtilTool.clickSound(),e.TrumpetView.getInstance().show()},a.prototype.focusIn=function(){e.EventTranspond.getInstance().curActiveTarget="chatInput"},a.prototype.focusOut=function(){e.EventTranspond.getInstance().curActiveTarget=null},a.prototype.createWebsocket=function(t){var n=this;n.ws=MainSocket.getInstance().connect(UserData.getInstance().host+":8080/chat/"+t.data.userId+"/"+e.PersonalModel.getInstance().grade+"/"+t.data.nickName),n.ws.onmessage(n.onmessage,n)},a.prototype.onmessage=function(t){var n=this;if(t&&"string"==typeof t.data){var a=JSON.parse(t.data);if("1"!=a.type)return void e.TrumpetTopView.getInstance().updateList(a);n.vb.dataProvider?(n.vb.dataProvider.push(a),n.vb.validData()):n.vb.dataProvider=[a]}},a}(GYLite.GYUIComponent);e.ChatView=t,__reflect(t.prototype,"main.ChatView");var n=function(t){function n(){var e=t.call(this)||this,n=e;return n.width=210,n.mes=SkinManager.createText(n,2,0,"",16777215,14),n.mes.width=n.width-4,e}return __extends(n,t),n.prototype.setData=function(t){var n=this;n.mes.htmlText="<font color=0x00A8F3>"+t.nickName+"</font> : <font color="+(e.NickNameColor.colorSets[t.grade]||e.NickNameColor.colorSets[6])+">"+t.msg+"</font>",n.updateState(t)},n.prototype.updateState=function(e){var t=this;t.height=t.mes.contentHeight+5},n}(GYLite.ItemRender);__reflect(n.prototype,"ChatItem")}(main||(main={}));var main;!function(e){var t=function(e){function t(){var t=e.call(this)||this,n=t;n.head=SkinManager.createImage(n,20,20,"q","main/img/head.png"),n.head.scaleX=.5,n.head.scaleY=.5;var a=new GYLite.GYSprite;a.x=n.head.x,a.y=n.head.y,a.width=a.height=50;var i=a.graphics;i.beginFill(0,1),i.drawRoundRect(0,0,50,50,50),i.endFill(),n.head.mask=a,n.addElement(a);var r=SkinManager.createImage(n,80,50,"war_id_img_png",URLConf.gameImg+"w1sheet.png"),o=SkinManager.createScaleImage(n,r.x+r.width,r.y,"war_bet_setting_selected_count__bormal_bg_png",URLConf.gameImg+"w1sheet.png",new GYLite.Scale9GridRect(2,2,2,2));o.width=100,o.height=20;var s=SkinManager.createScaleImage(n,20,90,"war_bet_setting_selected_count__bormal_bg_png",URLConf.gameImg+"w1sheet.png",new GYLite.Scale9GridRect(2,2,2,2));s.width=100,s.height=30;var c=SkinManager.createImage(n,20,90,"war_gold_img_png",URLConf.gameImg+"w1sheet.png"),g=SkinManager.createScaleImage(n,140,90,"war_bet_setting_selected_count__bormal_bg_png",URLConf.gameImg+"w1sheet.png",new GYLite.Scale9GridRect(2,2,2,2));g.width=100,g.height=30;var l=SkinManager.createImage(n,140,90,"war_silver_img_png",URLConf.gameImg+"w1sheet.png");return n.userNickText=SkinManager.createText(n,r.x,20,"",16777215,22),n.userIdText=SkinManager.createText(n,o.x+2,o.y+3,"",16777215,14),n.userGText=SkinManager.createText(n,c.x+c.width+2,c.y+8,"",15715586,14),n.userYText=SkinManager.createText(n,l.x+l.width+2,l.y+8,"",16777215,14),t}return __extends(t,e),t.getInstance=function(){return t._instance||(t._instance=new t)},t.prototype.setData=function(e){var t=this;t.head.source=Main.instance.getRes(e.avatar,"main/img/head.png"),t.userNickText.text=e.nickName,t.userIdText.text=e.userId,t.userGText.text=e.gold,t.userYText.text=e.silver},t}(GYLite.GYUIComponent);e.PersonalView=t,__reflect(t.prototype,"main.PersonalView")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var n=t.call(this)||this,a=n;return a.back=SkinManager.createImage(a,0,0,"war_left_bg_png",URLConf.gameImg+"w2sheet.png"),a.personalView=e.PersonalView.getInstance(),a.addElement(a.personalView),a.chatView=e.ChatView.getInstance(),a.chatView.x=20,a.chatView.y=150,a.addElement(a.chatView),n}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.notifyChatView=function(e){var t=this;t.chatView.createWebsocket(e)},n}(GYLite.GYUIComponent);e.SideTopLeftView=t,__reflect(t.prototype,"main.SideTopLeftView")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var e=t.call(this)||this,n=e;n.horizonalCenter=0,n.verticalCenter=0,n.back=SkinManager.createScaleImage(n,0,0,"rms_view_bg_png",URLConf.mainImg+"d1sheet.png",new GYLite.Scale9GridRect(60,60,60,60)),n.back.width=800,n.back.height=300,n.close=SkinManager.createBtn2(n,0,0,["rms_view_close_btn_png"],URLConf.mainImg+"d1sheet.png",null,null,ScaleButtonSkin2),n.close.eventname="close",n.close.top=-20,n.close.right=-20;var a=SkinManager.createImage(n,0,40,"rms_trumpet_title_bg_png",URLConf.mainImg+"d2sheet.png");a.horizonalCenter=0;var i=SkinManager.createImage(n,0,0,"rms_trumpet_title_big_png",URLConf.mainImg+"d2sheet.png");i.y=(a.height-i.height>>1)+a.y,i.horizonalCenter=0,n.trumpet_b=TemplateTool.createTextInput(n,30,a.y+a.height+30,600,40,"请输入大喇叭内容...",24,16777215,100),n.send_b=SkinManager.createBtn2(n,n.trumpet_b.x+n.trumpet_b.width+10,n.trumpet_b.y,["rms_btn_bg_1_png"],URLConf.mainImg+"d2sheet.png"),n.send_b.eventname="sendb",n.send_b.label="发送",n.send_b.labelDisplay.color=16777215,n.send_b.labelDisplay.size=24,n.trumpet_b.height=n.send_b.height;var r=SkinManager.createText(n,0,0,"");return r.htmlText="提示: 每条喇叭消耗<font color=0xEFCD02> 20 </font>金币, 消息在全频道滚动播放",r.horizonalCenter=0,r.bottom=40,n.bindEvent(),e}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.bindEvent=function(){var t=this;t.handlers={close:function(){e.UtilTool.clickSound(),t.hide()},sendb:function(){e.UtilTool.clickSound(),t.trumpet_b.text&&(e.MainModel.getInstance().addNotice(t.trumpet_b.text),e.ChatView.getInstance().handleSend(t.trumpet_b.text),t.trumpet_b.text="")}},t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.handle,t)},n.prototype.handle=function(e){var t=this;t.handlers[e.target.eventname]&&t.handlers[e.target.eventname]()},n.prototype.show=function(){var e=this;LayerManager.getInstance().setTopMask(!0);var t=LayerManager.getInstance().topLay;t.addElement(e)},n.prototype.hide=function(){var e=this;LayerManager.getInstance().setTopMask(!1),e.parent.removeElement(e)},n}(GYLite.GYUIComponent);e.TrumpetView=t,__reflect(t.prototype,"main.TrumpetView")}(main||(main={}));var main;!function(e){var t=function(t){function a(){var e=t.call(this)||this,a=e;a.eventSets={},a.width=800,a.height=536,a.horizonalCenter=0,a.verticalCenter=0,a.back=SkinManager.createScaleImage(a,0,0,"rms_view_bg_png",URLConf.mainImg+"d1sheet.png",new GYLite.Scale9GridRect(60,60,60,60)),a.back.width=a.width,a.back.height=a.height,a.close=SkinManager.createBtn2(a,0,0,["rms_view_close_btn_png"],URLConf.mainImg+"d1sheet.png",null,null,ScaleButtonSkin2),a.close.eventname="close",a.close.top=-20,a.close.right=-20;var i=SkinManager.createScaleImage(a,0,140,"rms_view_line_2_png",URLConf.mainImg+"d2sheet.png",new GYLite.Scale9GridRect);i.width=a.width;for(var r=["时间","描述","收益"],o=0;o<r.length;o++){SkinManager.createText(a,o*a.width/3+(a.width/3-160)/2,78,r[o],16777215,40,"center",160,40)}return a.list=SkinManager.createListV(a,0,160,a.width-40,320,n),a.list.x=a.width-760>>1,a.list.canDrag=!0,a.list.scrollerPolicy=2,a.bindEvent(),e}return __extends(a,t),a.getInstance=function(){return a._instance||(a._instance=new a)},a.prototype.bindEvent=function(){var t=this;t.eventSets={close:function(){e.UtilTool.clickSound(),t.hide()}},t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.handleClick,t)},a.prototype.handleClick=function(e){var t=this;t.eventSets[e.target.eventname]&&t.eventSets[e.target.eventname](e)},a.prototype.setData=function(e){var t=this;t.list.dataProvider=e},a.prototype.show=function(){var t=this;LayerManager.getInstance().setTopMask(!0);var n=LayerManager.getInstance().topLay;n.addElement(t),e.MainModel.getInstance().getMyRecord()},a.prototype.hide=function(){var e=this;LayerManager.getInstance().setTopMask(!1),e.parent.removeElement(e)},a}(GYLite.GYUIComponent);e.BetDetailDialogView=t,__reflect(t.prototype,"main.BetDetailDialogView");var n=function(t){function n(){var e=t.call(this)||this,n=e;return n.width=760,n.height=32,n.icon=SkinManager.createImage(n,0,0,"game_cion_gold_small_png",URLConf.mainImg+"d1sheet.png"),n.time=SkinManager.createText(n,0,0,"",16777215,14,"center",n.width/3,n.height),n.desc=SkinManager.createText(n,n.width/3,0,"",16777215,14,"center",n.width/3,n.height),n.num=SkinManager.createText(n,n.width/3*2+140,0,"",16777215,14,"left",n.width/3,n.height),n.time.y=n.desc.y=n.num.y=n.height-14>>1,n.icon.x=n.width/3*2+140-32,n.icon.y=n.height-22>>1,e}return __extends(n,t),n.prototype.setData=function(t){var n=this;return t?(n.visible=!0,n.time.text=t.createTime,n.desc.text=t.remark,t.num=e.UtilTool.formatBet(t.num),n.num.text=2==t.inouttype?"- "+t.num:"+ "+t.num,void(n.icon.source=Main.instance.getRes(1==t.type?"game_cion_gold_small_png":"game_cion_silver_small_png",URLConf.mainImg+"d1sheet.png"))):void(n.visible=!1)},n}(GYLite.ItemRender);e.BetDetailItem=n,__reflect(n.prototype,"main.BetDetailItem")}(main||(main={}));var main;!function(e){var t=function(t){function a(){var a=t.call(this)||this,i=a;i.tabBtn=new e.TabButton,i.tabBtn.x=62,i.tabBtn.y=92,i.addElement(i.tabBtn);var r=SkinManager.createImage(i,220,130,"war_top_gold_png",URLConf.gameImg+"w1sheet.png");SkinManager.createImage(i,r.x+r.width,r.y,"war_top_silver_png",URLConf.gameImg+"w1sheet.png");return i.list=SkinManager.createListV(i,55,178,230,376,n),i.list.scrollerPolicy=2,i.bindEvent(),a}return __extends(a,t),a.getInstance=function(){return a._instance||(a._instance=new a)},a.prototype.bindEvent=function(){var e=this;e.tabBtn.bindClick(e.handleTabClick,e)},a.prototype.handleTabClick=function(t){var n=this;if(1==t)e.UtilTool.clickSound(),e.GameModel.getInstance().getBettingRank();else{e.UtilTool.clickSound();var a=e.GameModel.getInstance().lastWinRank;a=a.map(function(e){return __assign({},e,{betgold:e.wingold,betsilver:e.winsilver})}),n.updateRankList(a)}},a.prototype.updateRankList=function(e){var t=this;t.list.dataProvider=e},a}(GYLite.GYUIComponent);e.BetRankView=t,__reflect(t.prototype,"main.BetRankView");var n=function(t){function n(){var e=t.call(this)||this,n=e;return n.width=230,n.height=37.6,n.head=SkinManager.createImage(n,0,0,"",URLConf.gameImg+"w1sheet.png"),n.head.width=34,n.head.height=34,TemplateTool.setBorderRadius(n.head),n.username=SkinManager.createText(n,n.head.x+n.head.width+2,16,""),n.username.size=12,n.money=SkinManager.createText(n,n.head.x+n.head.width+110,n.username.y,""),n.money.width=85,n.money.size=13,n.money.textAlign="center",n.bindEvent(),e}return __extends(n,t),n.prototype.bindEvent=function(){var e=this;e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleClick,e)},n.prototype.handleClick=function(){var t=this;e.UtilTool.clickSound(),e.MainModel.getInstance().getInfoById(t._data.userId)},n.prototype.setData=function(t){var n=this;if(!t)return void(n.visible=!1);n.visible=!0,n._data=t,t.avatar&&(n.head.source=Main.instance.getRes(t.avatar,e.Conf.img+"head.png"));var a=e.UtilTool.getGrade(t.exp);n.username.htmlText="<font color="+e.NickNameColor.colorSets[a]+">"+t.nickName+"</font>",n.money.htmlText="<font color=0xEFCD02>"+e.UtilTool.formatBet(t.betgold)+"</font> "+e.UtilTool.formatBet(t.betsilver)},n}(GYLite.ItemRender);e.BetRankItem=n,__reflect(n.prototype,"main.BetRankItem")}(main||(main={}));var main;!function(e){var t=function(e){function t(){var t=e.call(this)||this,n=t,a=SkinManager.createScaleImage(n,100,592,"war_bet_setting_selected_count__bormal_bg_png",URLConf.gameImg+"w1sheet.png",new GYLite.Scale9GridRect(2,2,2,2));a.width=100,a.height=30;var i=SkinManager.createImage(n,100,592,"war_gold_img_png",URLConf.gameImg+"w1sheet.png"),r=SkinManager.createScaleImage(n,100,a.y+a.height+5,"war_bet_setting_selected_count__bormal_bg_png",URLConf.gameImg+"w1sheet.png",new GYLite.Scale9GridRect(2,2,2,2));r.width=100,r.height=30;var o=SkinManager.createImage(n,100,a.y+a.height+5,"war_silver_img_png",URLConf.gameImg+"w1sheet.png");return n.userGText=SkinManager.createText(n,i.x+i.width+2,i.y+8,"0",15715586,14),n.userYText=SkinManager.createText(n,o.x+o.width+2,o.y+8,"0",16777215,14),t}return __extends(t,e),t.getInstance=function(){return t._instance||(t._instance=new t)},t.prototype.render=function(e){var t=this;t.userGText.text=e.g,t.userYText.text=e.y},t}(GYLite.GYUIComponent);e.CurrentRoundSumView=t,__reflect(t.prototype,"main.CurrentRoundSumView")}(main||(main={}));var main;!function(e){var t=function(t){function a(){var a=t.call(this)||this;a.type=1;var i=a;i.width=1046,i.height=536,i.horizonalCenter=0,i.verticalCenter=0,i.back=SkinManager.createScaleImage(i,0,0,"rms_view_bg_png",URLConf.mainImg+"d1sheet.png",new GYLite.Scale9GridRect(60,60,60,60)),i.back.width=i.width,i.back.height=i.height,i.close=SkinManager.createBtn2(i,0,0,["rms_view_close_btn_png"],URLConf.mainImg+"d1sheet.png",null,null,ScaleButtonSkin2),i.close.eventname="close",i.close.top=-20,i.close.right=-20;var r=SkinManager.createImage(i,0,0,"rms_view_title_bg_png",URLConf.mainImg+"d1sheet.png");r.horizonalCenter=0,r.y=-r.height/2;var o=SkinManager.createImage(i,0,0,"rms_top_list_title_png",URLConf.mainImg+"d1sheet.png");o.horizonalCenter=0,o.y=r.y+(r.height-o.height>>1);var s=SkinManager.createScaleImage(i,240,0,"rms_view_line_png",URLConf.mainImg+"d1sheet.png",new GYLite.Scale9GridRect(0,0,52,52));s.height=i.back.height;var c=[{source:"rms_top_list_tab_today_gold_winner_png",sourceSel:"rms_top_list_tab_today_gold_winner_selected_png"},{source:"rms_top_list_tab_today_silver_winner_png",sourceSel:"rms_top_list_tab_today_silver_winner_selected_png"},{source:"rms_top_list_tab_yestoday_gold_medal_png",sourceSel:"rms_top_list_tab_yestodat_gold_medal_selected_png"},{source:"rms_top_list_tab_testoday_silver_winner_png",sourceSel:"rms_top_list_tab_yestoday_silver_winner_selected_png"},{source:"VIP2.png",sourceSel:"VIP1.png"}];i.radioGroup=new GYLite.GYRadioGroup;for(var g=0;5>g;g++)if(4>g){var l=SkinManager.createBtn2(i,28,0,[c[g].source,null,null,null,c[g].sourceSel,c[g].sourceSel,c[g].sourceSel,c[g].sourceSel],URLConf.mainImg+"d1sheet.png",null,GYLite.GYRadioButton,e.MyRadioButtonSkin);l.y=g*(l.height+30)+100,l.radioGroup=i.radioGroup,l.eventname="btn_"+g,0==g&&(l.radioGroup.selectedButton=l);SkinManager.createImage(i,20,l.y+l.height,"rms_top_list_tab_line_png",URLConf.mainImg+"d1sheet.png");i.firstBtn||(i.firstBtn=l)}else{var l=SkinManager.createBtn2(i,28,0,[e.Conf.img+c[g].source,null,null,null,e.Conf.img+c[g].sourceSel,e.Conf.img+c[g].sourceSel,e.Conf.img+c[g].sourceSel,e.Conf.img+c[g].sourceSel],null,null,GYLite.GYRadioButton,e.MyRadioButtonSkin);l.y=g*(l.height+30)+100,l.radioGroup=i.radioGroup,l.eventname="btn_"+g,0==g&&(l.radioGroup.selectedButton=l);SkinManager.createImage(i,20,l.y+l.height,"rms_top_list_tab_line_png",URLConf.mainImg+"d1sheet.png")}return i.list=SkinManager.createListV(i,290,60,716,410,n),i.list.canDrag=!0,i.bindEvent(),a}return __extends(a,t),a.getInstance=function(){return a._instance||(a._instance=new a)},a.prototype.bindEvent=function(){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleClick,e)},a.prototype.handleClick=function(t){var n=this;if(t.target.eventname)switch(e.UtilTool.clickSound(),t.target.eventname){case"btn_0":n.type=1,e.GameModel.getInstance().selectWinRank({type:n.type,today:1});break;case"btn_1":n.type=2,e.GameModel.getInstance().selectWinRank({type:n.type,today:1});break;case"btn_2":n.type=1,e.GameModel.getInstance().selectWinRank({type:n.type,today:0});break;case"btn_3":n.type=2,e.GameModel.getInstance().selectWinRank({type:n.type,today:0});break;case"btn_4":n.type=1,e.GameModel.getInstance().getVipRank();break;case"close":n.hide()}},a.prototype.updateRankList=function(t,n){var a=this;e.PersonalModel.getInstance().userId;t=t.map(function(e,t){return __assign({},e,{rank:t+1,vip:n})}),a.list.dataProvider=t},a.prototype.show=function(){var t=this;e.LayerIndex.addIndex(),LayerManager.getInstance().setTopMask(!0,.5,e.LayerIndex.getIndex());var n=LayerManager.getInstance().topLay;n.addElement(t),t.radioGroup.selectedButton=t.firstBtn,e.GameModel.getInstance().selectWinRank({type:1,today:1})},a.prototype.hide=function(){var t=this;0!=e.LayerIndex.getIndex()?(e.LayerIndex.subIndex(),LayerManager.getInstance().setTopMask(!0,.5,e.LayerIndex.getIndex())):(e.LayerIndex.curIndex=-1,LayerManager.getInstance().setTopMask(!1)),t.parent.removeElement(t)},a}(GYLite.GYUIComponent);e.RankDialogView=t,__reflect(t.prototype,"main.RankDialogView");var n=function(t){function n(){var e=t.call(this)||this,n=e;n.width=716,n.height=82,n.rankImg=SkinManager.createImage(n,0,0,""),n.rankImg.visible=!1,n.rankText=SkinManager.createText(n,0,0,""),n.rankText.width=122,n.rankText.textAlign="center",n.rankText.visible=!1,n.back=SkinManager.createImage(n,140,0,"user_head_bg_84_76_png",URLConf.mainImg+"d1sheet.png"),n.back.visible=!1;var a=n.back.width/n.back.height;n.back.width=n.height-10,n.back.height=(n.height-10)/a,n.back.y=n.height-10-n.back.height>>1,n.head=SkinManager.createImage(n,n.back.x+9,n.back.y+6,""),n.head.width=n.height-29,n.head.height=n.height-29,TemplateTool.setBorderRadius(n.head),n.icon=SkinManager.createImage(n,610,0,""),n.icon.verticalCenter=0;var i=SkinManager.createScaleImage(n,0,n.height-5,"rms_top_list_item_line_png",URLConf.mainImg+"d1sheet.png",new GYLite.Scale9GridRect(20,20));return i.width=n.width,n.nickname=SkinManager.createText(n,n.back.x+n.back.width+5,0,""),n.nickname.verticalCenter=0,n.money=SkinManager.createText(n,0,0,""),n.money.verticalCenter=2,n.bindEvent(),e}return __extends(n,t),n.prototype.bindEvent=function(){var e=this;e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleClick,e)},n.prototype.handleClick=function(){var t=this;e.UtilTool.clickSound(),e.MainModel.getInstance().getInfoById(t._data.userId)},n.prototype.setData=function(t){var n=this;if(!t)return void(n.visible=!1);if(n.visible=!0,n._data=t,t.rank<=3){var a=1==t.rank?"1st":2==t.rank?"2nd":"3rd";n.rankImg.source=Main.instance.getRes("rms_top_list_"+a+"_png",URLConf.mainImg+"d1sheet.png"),n.rankImg.visible=!0,n.rankText.visible=!1}else n.rankImg.visible=!1,n.rankText.text=t.rank+"TH",n.rankText.y=n.height-n.rankText.height>>1,n.rankText.visible=!0;n.back.visible=!0,n.head.source=Main.instance.getRes(t.avatar,e.Conf.img+"head.png"),n.nickname.text=t.nickName,t.vip||(n.icon.source=Main.instance.getRes(1==t.type?"game_cion_gold_small_png":"game_cion_silver_small_png",URLConf.mainImg+"d1sheet.png"),n.money.text=e.UtilTool.formatBet(Number(t.num)),n.money.x=n.icon.x+n.icon.width+5)
},n}(GYLite.ItemRender);e.RankDialogItem=n,__reflect(n.prototype,"main.RankDialogItem")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var n=t.call(this)||this,a=n;a.eventSets={},a.width=780,a.height=350,a.horizonalCenter=0,a.verticalCenter=0,a.back=SkinManager.createScaleImage(a,0,0,"rms_view_bg_png",URLConf.mainImg+"d1sheet.png",new GYLite.Scale9GridRect(60,60,60,60)),a.back.width=a.width,a.back.height=a.height,a.close=SkinManager.createBtn2(a,0,0,["rms_view_close_btn_png"],URLConf.mainImg+"d1sheet.png",null,null,ScaleButtonSkin2),a.close.eventname="close",a.close.top=-20,a.close.right=-20;var i=SkinManager.createImage(a,0,0,"rms_view_title_bg_png",URLConf.mainImg+"d1sheet.png");i.x=a.width-i.width>>1,i.y=-i.height/2;var r=SkinManager.createImage(a,0,0,"rms_setting_title_png",URLConf.mainImg+"d2sheet.png");r.x=a.width-r.width>>1,r.y=-r.height/2;var o=SkinManager.createImage(a,0,64,"rms_setting_base_item_bg_png",URLConf.mainImg+"d2sheet.png");o.x=a.width-o.width>>1;var s=SkinManager.createImage(a,0,o.y+o.height+30,"rms_setting_base_item_bg_png",URLConf.mainImg+"d2sheet.png");s.x=o.x;var c=SkinManager.createText(a,o.x+26,o.y+18,"隐私开关",16777215,30,"center",188,52);SkinManager.createText(a,c.x,s.y+18,"音量调节",16777215,30,"center",188,52);a.switchBtn=new e.SwitchButton,a.switchBtn.x=350,a.switchBtn.y=64,a.addElement(a.switchBtn);var g=new GYLite.GYScaleSprite,l=new GYLite.GYScaleSprite(Main.instance.getRes("rms_setting_slider_bg_png",URLConf.mainImg+"d2sheet.png")),m=new GYLite.ButtonSkin([Main.instance.getRes("rms_setting_slider_trum_png",URLConf.mainImg+"d2sheet.png")]);return a.slide=SkinManager.createSlider(a,350,158,350,60,new GYLite.SliderSkin(g,l,m)),a.slide.setValueByPos(350),a.signOutBtn=SkinManager.createBtn2(a,0,s.y+s.height+20,["rms_btn_bg_2_png"],URLConf.mainImg+"d2sheet.png"),a.signOutBtn.eventname="signOut",a.signOutBtn.x=a.width-a.signOutBtn.width>>1,a.signOutBtn.label="退出登录",a.signOutBtn.labelDisplay.color=16777215,a.signOutBtn.labelDisplay.size=24,a.bindEvent(),n}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.bindEvent=function(){var t=this;t.eventSets={close:function(){e.UtilTool.clickSound(),t.hide()},signOut:function(){e.UtilTool.clickSound(),e.PersonalModel.getInstance().logout(function(){t.hide()},t)},slide:function(){var n=SoundManager.instance.soundDict[e.Conf.sound+"gamebgm.mp3"];n&&(n.channel.volume=Number(t.slide.sliderBtn.toolTipString)/100)},"switch":function(t){e.UtilTool.clickSound(),e.PersonalModel.getInstance().updatePrivacy(t?1:0)}},t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.handleClick,t),t.switchBtn.bindClick(t.eventSets["switch"],t),t.slide.addEventListener(GYLite.GYViewEvent.VALUE_COMMIT,t.eventSets.slide,t)},n.prototype.setData=function(e){var t=this;t.switchBtn.isOpen="0"==e.privacy?!1:!0},n.prototype.handleClick=function(e){var t=this;t.eventSets[e.target.eventname]&&t.eventSets[e.target.eventname](e)},n.prototype.show=function(){var e=this;LayerManager.getInstance().setTopMask(!0);var t=LayerManager.getInstance().topLay;t.addElement(e)},n.prototype.hide=function(){var e=this;LayerManager.getInstance().setTopMask(!1),e.parent.removeElement(e)},n}(GYLite.GYUIComponent);e.SettingDialogView=t,__reflect(t.prototype,"main.SettingDialogView")}(main||(main={}));var main;!function(e){var t=function(t){function n(){var n=t.call(this)||this,a=n;a.width=304,a.height=680,a.back=SkinManager.createImage(a,0,0,"war_right_bg_png",URLConf.gameImg+"w1sheet.png"),a._imgArr=[];var i=["war_top_list_btn_png","war_account_btn_png","war_setting_btn_png","war_close_btn_png"];a._state={};for(var r=0;r<i.length;r++){var o=SkinManager.createImage(a,70+54*r,20,i[r],"game/img/w1sheet.png");o.imgname=i[r],o.touchEnabled=!0,o.buttonModeForMouse=!0,a._imgArr.push(o)}return a._state[i[0]]=function(){console.log("打开排行"),e.RankDialogView.getInstance().show()},a._state[i[1]]=function(){console.log("打开明细"),e.BetDetailDialogView.getInstance().show()},a._state[i[2]]=function(){console.log("设置"),e.SettingDialogView.getInstance().show()},a._state[i[3]]=function(){console.log("登出"),e.PersonalModel.getInstance().logout()},a._betRankView=e.BetRankView.getInstance(),a._betRankView.width=a.width,a._betRankView.height=a.height,a.addElement(a._betRankView),a._currentRoundSumView=e.CurrentRoundSumView.getInstance(),a.addElement(a._currentRoundSumView),a.bindEvent(),n}return __extends(n,t),n.getInstance=function(){return n._instance||(n._instance=new n)},n.prototype.bindEvent=function(){var e=this;e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.handleClick,e)},n.prototype.handleClick=function(t){var n=this;t.target.imgname&&(e.UtilTool.clickSound(),n._state[t.target.imgname]&&n._state[t.target.imgname]())},n}(GYLite.GYUIComponent);e.SideTopRightView=t,__reflect(t.prototype,"main.SideTopRightView")}(main||(main={}));